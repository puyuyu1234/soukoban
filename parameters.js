"use strict";

const BLOCKSIZE = 20;
const TEXT = {
    retry: "もう一度Rでリトライ",
    stageClear: "STAGE CLEAR !!",
    clearEX: "Spaceで次のステージ",
    clear0: "Spaceでステージセレクト",
    highScore: "ハイスコア更新!!",
    lastStage: "",
    lastStage2: "プレイありがとうございました",
    cookieReadError: "クッキーの読み取りエラー",
    cookieWriteError: "クッキーへの書き込みエラー",
    stage: "STAGE : {0}",
    step: "STEP : {0} / {1}",
    menu: {
        Resume: "続ける",
        Stage: "ステージ選択",
        Guide: "操作方法",
        Move: "移動",
        Retry: "リトライ",
        Undo: "一手戻す",
        Cont: "（連続）",
        Long: "（長押し）",
        Menu: "メニュー",
        Space: "Spaceで決定",
    },
    select: {
        title: "ステージセレクト",
        space: "Spaceで決定",
        stage: "STAGE {0}",
        step: "STEP : {0} / {1}",
        credit: "CREDIT",
    },
    credit: {
        credit1: "プログラム・BGM・SE",
        credit2: "puyuyu1234",
        credit3: "イラスト",
        credit4: "農のモン",
        credit5: "スペシャルサンクス",
        credit6: "チューリップ農園の皆様",
        credit7: "AND YOU!",
        credit8: "THANK YOU FOR PLAYING!!",
        space: "Spaceで閉じる",
    },
};

const CHARA = {
    " ": ["color", "#aaa", 16], // 16: 背景
    "#": ["color", "#622", 1 + 16], // 1: 壁
    "S": ["letter", "😎", 128], // 128: pusher
    "!": ["letter", "😎", 8 + 128], // 128: pusher
    ".": ["color", "#48c", 2 + 16], // 2: ゴール
    "P": ["letter", "🥺", 1 + 4 + 8], // 4: 押せるentity, 8:クリア判定あり
    "p": ["letter", "🥺", 1 + 4 + 8 + 2],
    "K": ["letter", "😒", 1 + 4 + 8], // 4: 押せるentity, 8:クリア判定あり
    "O": ["letter", "😭", 1 + 4 + 8], // 4: 押せるentity, 8:クリア判定あり
    "U": ["letter", "💩", 1 + 32], // 32: うんち
    "u": ["letter", "💩", 1 + 32 + 2],
    "Y": ["letter", "🤥", 1 + 4 + 8 + 64], // 64: うんち食べる
    "y": ["letter", "🤥", 1 + 4 + 8 + 64 + 2],
    "E": ["letter", "😳", 1 + 4 + 8 + 128],
    "e": ["letter", "😳", 1 + 4 + 8 + 128 + 2],
    "1": ["2letter", "😭🍄", 1 + 4 + 8 + 256], // 256: 2文字以上
    "0": ["2letter", "", 1 + 4 + 8 + 256], // 右側
    "2": ["3letter", "༼⁠༎ຶ⁠ ⁠۝ ⁠༎ຶ⁠༽", 1 + 4 + 256],
    "9": ["2letter", "", 1 + 4 + 256], // 右側 クリアフラグなし
    "M": ["letter", "🥳", 1 + 4 + 8 + 512], // 512: EATER
    "G": ["letter", "🗿", 1 + 4],
    "T": ["letter", "🫥", 1 + 1024], // 1024: 透過壁
    "N": ["letter", "😐", 1 + 4 + 8],
    "A": ["3letter", "🫲🥺🫱", 1 + 4 + 8 + 256],
    "z": ["letter", "😴", 1 + 2 + 4 + 8 + 2048], // 2048: ぷゆゆ変化
    "J": ["letter", "🤨", 1 + 4 + 8],
    "g": ["letter", "😎", 1 + 2 + 4 + 8],
    "H": ["letter", "🥹", 1 + 4 + 8],
};

const STAGE = [
    [
        [
            "                    ",
            "                    ",
            "                    ",
            "                    ",
            "      #########     ",
            "      #.    PS#     ",
            "      #########     ",
            "                    ",
            "                    ",
            "                    ",
            "                    ",
            "                    ",
            "                    ",
            "                    ",
            "                    ",
        ],
        [],
    ],
    [
        [
            "                    ",
            "                    ",
            "                    ",
            "                    ",
            "                    ",
            "       ######       ",
            "       #.  ##       ",
            "       #  P #       ",
            "       ##  S#       ",
            "       ######       ",
            "                    ",
            "                    ",
            "                    ",
            "                    ",
            "                    ",
            "                    ",
        ],
        [
            "👨‍🌾「このぷゆゆは寝床が分からないらしいので",
            "     連れて行ってあげてください」",
            "😎「なんで分かんねえんだよ💢」",
            "🥺「❓」",
        ],
    ],
    [
        [
            "                    ",
            "                    ",
            "                    ",
            "                    ",
            "                    ",
            "       ######       ",
            "       #.   #       ",
            "       #pPPS#       ",
            "       #.   #       ",
            "       ######       ",
            "                    ",
            "                    ",
            "                    ",
            "                    ",
            "                    ",
        ],
        ["🥺「ぷー」🥺「ぷー」🥺「ぷー」", "😎「はやく寝ろ」"],
    ],
    [
        [
            "                    ",
            "                    ",
            "                    ",
            "                    ",
            "       #######      ",
            "       #.#   #      ",
            "       #.# P #      ",
            "       #  SP##      ",
            "       #  # #       ",
            "       ##   #       ",
            "        #####       ",
            "                    ",
            "                    ",
            "                    ",
            "                    ",
        ],
        ["🥺「道に迷っちゃったぷゆ……」", "😎（なんで迷うんだ……？）"],
    ],
    [
        [
            "                    ",
            "                    ",
            "                    ",
            "                    ",
            "        #####       ",
            "       ##   #       ",
            "       #  # #       ",
            "       #  u ##      ",
            "       #  pY #      ",
            "       ##   S#      ",
            "        ######      ",
            "                    ",
            "                    ",
            "                    ",
            "                    ",
        ],
        ["🥺「うんちがあって眠れないぷゆ！」", "🤥「ゆめちゃんの食事邪魔するのやめてな」"],
    ],
    [
        [
            "                    ",
            "                    ",
            "                    ",
            "                    ",
            "       #######      ",
            "       #  #  #      ",
            "       # YYU #      ",
            "       # .Y. #      ",
            "       ## #  #      ",
            "       # .  S#      ",
            "       #######      ",
            "                    ",
            "                    ",
            "                    ",
            "                    ",
        ],
        [
            "🤥「ゆめちゃんうんち食べるよぉ🤥💩」",
            "🤥「なりすまし🤥💢",
            "     ゆめちゃんいちご食べるよぉ🤥🍓」",
            "🤥「おまなり🤥💢」",
            "😎「はよ寝ろ💢」",
        ],
    ],
    [
        [
            "                    ",
            "                    ",
            "                    ",
            "                    ",
            "        #####       ",
            "        #...#       ",
            "     ####...###     ",
            "     #     EES#     ",
            "     #  E# E###     ",
            "     ##  EE #       ",
            "      ##    #       ",
            "       ######       ",
            "                    ",
            "                    ",
            "                    ",
        ],
        [
            "😳「ぺーゆーゆ！✊😳」",
            "😳「トテ坊きたよ✊😳」",
            "😳「ヌーイ✊😳」",
            "😎（まったく区別がつかねぇ……💦）",
        ],
    ],
    [
        [
            "                    ",
            "                    ",
            "                    ",
            "                    ",
            "         #####      ",
            "         #   #      ",
            "       ###E  #      ",
            "       #. PE #      ",
            "       # ##  #      ",
            "       #. . S#      ",
            "       #######      ",
            "                    ",
            "                    ",
            "                    ",
            "                    ",
        ],
        [
            "😳「ミクしゃすき✊😳ちんちん生えてるから✊😳」",
            "😳「わかる✊😳」",
            "🥺「生えてないけど💢」",
            "",
            "🥺💥🤛🤛😳😳",
        ],
    ],
    [
        [
            "                    ",
            "                    ",
            "                    ",
            "                    ",
            "        ####        ",
            "       ##  ###      ",
            "       #     #      ",
            "       # 1   #      ",
            "       ##K#  #      ",
            "       #  . S#      ",
            "       #######      ",
            "                    ",
            "                    ",
            "                    ",
            "                    ",
        ],
        ["😭「もう寝るぽぽ😭🍄」", "😒「きも😒」"],
    ],
    [
        [
            "                    ",
            "                    ",
            "                    ",
            "                    ",
            "       #######      ",
            "       #   ..#      ",
            "       # 2   #      ",
            "       # 1   #      ",
            "       #   ###      ",
            "       #    S#      ",
            "       #######      ",
            "                    ",
            "                    ",
            "                    ",
            "                    ",
        ],
        ["😭「デリヘル呼んだぽぽ😭🍄」", "     楽しみぽぽ😭🍄」", "", "🚪ガチャ  ༼⁠༎ຶ⁠ ⁠۝ ⁠༎ຶ⁠༽"],
    ],
    [
        [
            "                    ",
            "                    ",
            "                    ",
            "                    ",
            "       #######      ",
            "       # ... #      ",
            "       # OOO #      ",
            "       # OOO #      ",
            "       # MOO##      ",
            "       # ...S#      ",
            "       #######      ",
            "                    ",
            "                    ",
            "                    ",
            "                    ",
        ],
        [
            "🥳「みー」",
            "😭「ゴリ押し絵文字はNGぽぽ😭🤚」",
            "",
            "ｼﾞｭﾙｼﾞｭﾙ🥳😭ｱｯｱｯ",
            "",
            "        🥳💨💀",
        ],
    ],
    [
        [
            "                    ",
            "                    ",
            "                    ",
            "                    ",
            "        #####       ",
            "        #   #       ",
            "        #  P##      ",
            "       ##P  S#      ",
            "       #  P# #      ",
            "       #  ...#      ",
            "       #######      ",
            "                    ",
            "                    ",
            "                    ",
            "                    ",
        ],
        [
            "🥺「こんがん、こいぬのめ、こころの不調、",
            "     ジェットストリームアタックを仕掛けるぞ！」",
            "",
            "      🥺三",
            "🥺三       ドムドムドームドム",
            "   🥺三",
        ],
    ],
    [
        [
            "                    ",
            "                    ",
            "                    ",
            "                    ",
            "       ######       ",
            "       #    ##      ",
            "       # EMO #      ",
            "       # #YU #      ",
            "       # J . #      ",
            "       # P  S#      ",
            "       #  ####      ",
            "       ####         ",
            "                    ",
            "                    ",
            "                    ",
        ],
        [
            "🥺「寝る場所が一つしかないぷゆ！」",
            "😳「殺してでも奪い取るぺゆ✊😳」",
            "🥳「ﾆ……ｸ……」",
            "😭「！！！こいつヤバいぽぽ～っ！」",
            "🤨「ゆめちゃん、この部屋おかしいよ」",
            "🤥「ゆめちゃん関係ないよぉ」🤥💩ﾑｼｬﾑｼｬ",
        ],
    ],
    [
        [
            "                    ",
            "                    ",
            "                    ",
            "                    ",
            "      #######       ",
            "      #     #       ",
            "      # z z #       ",
            "      #  . ###      ",
            "      # z z  #      ",
            "      #  # P #      ",
            "      ####  S#      ",
            "         #####      ",
            "                    ",
            "                    ",
            "                    ",
        ],
        ["😴「ZZZ」", "🥺「みんな寝ちゃって寝れないぷー💦」", "😎「おら！お前ら起きろ！朝だぞ！」"],
    ],
    [
        [
            "                    ",
            "                    ",
            "                    ",
            "                    ",
            "   #####            ",
            "   #...####         ",
            "   #...   ####      ",
            "   #...  A   ##     ",
            "   ####   A   ##    ",
            "      ###  A   #    ",
            "        ####  S#    ",
            "           #####    ",
            "                    ",
            "                    ",
            "                    ",
        ],
        [
            "🫲🥺🫱「ﾌﾟﾌﾟｰﾌﾟﾌﾟﾕﾕ🎶ﾌﾟﾌﾟｰﾌﾟﾌﾟﾕﾕ🎶」",
            "🫲🥺🫱「ﾌﾟﾌﾟﾌﾟﾌﾟﾌﾟｰ🎶ﾌﾟﾌﾟﾌﾟﾌﾟﾌﾟｰ🎶」",
            "😎「うるさいぞ！」",
            "🫲🥺🫱「ﾌﾟﾌﾟｰﾌﾟﾌﾟﾕﾕ🎶ﾌﾟﾌﾟｰﾌﾟﾌﾟﾕﾕ🎶」",
            "😎「無理やり眠らせるか……」",
        ],
    ],
    [
        [
            "                    ",
            "                    ",
            "                    ",
            "                    ",
            "       #####        ",
            "       #.  ###      ",
            "       #  G  #      ",
            "       ##GMG #      ",
            "        # G  #      ",
            "        #   S#      ",
            "        ######      ",
            "                    ",
            "                    ",
            "                    ",
            "                    ",
        ],
        [
            "🗿「見慣れない顔ギガスねぇ🗿」",
            "🗿「新参ギガスか？🗿」",
            "🗿「よろしくギガス🗿👍」",
            "🥳💦「み、みー」",
            "",
            "😎「なんだこいつら」",
        ],
    ],
    [
        [
            "                    ",
            "                    ",
            "                    ",
            "                    ",
            "       #######      ",
            "       #.....#      ",
            "       # NTN #      ",
            "       # NTN #      ",
            "       #  N  #      ",
            "       #    S#      ",
            "       #######      ",
            "                    ",
            "                    ",
            "                    ",
            "                    ",
        ],
        [
            "😐「ぬぇーふ」",
            "😐「ぬぇーふ」",
            "😐「よよーよん」",
            "🫥（きぇーふ）",
            "😎「ん？妙な気配が……？」",
        ],
    ],
    [
        [
            "                    ",
            "                    ",
            "        #####       ",
            "       #     #      ",
            "      #  # #  #     ",
            "     #  #   #  #    ",
            "     #         #    ",
            "     #  .# .#  #    ",
            "     #  ## ##  #    ",
            "     #         #    ",
            "      # P###P #     ",
            "       #  S  #      ",
            "        #####       ",
            "                    ",
            "                    ",
        ],
        ["😎「なんだこの部屋💦」", "🥺「ここはぷゆゆルーム……」"],
    ],
    [
        [
            "                    ",
            "                    ",
            "        #####       ",
            "       #     #      ",
            "      #  # #  #     ",
            "     #  #   #  #    ",
            "     #         #    ",
            "     # H.# .#H #    ",
            "     # H.. ..H #    ",
            "     #         #    ",
            "      # H###H #     ",
            "       #  S  #      ",
            "        #####       ",
            "                    ",
            "                    ",
        ],
        ["😎「なんだこの部屋💦」", "🥹「ここは高橋ルーム……」", "😎「ほぼコピペじゃねえか」"],
    ],
    [
        [
            "                    ",
            "                    ",
            "                    ",
            "                    ",
            "      #########     ",
            "      #   U ..#     ",
            "      # # # ..#     ",
            "      # P ## ##     ",
            "      # P    #      ",
            "      ###P#Y #      ",
            "       #    S#      ",
            "       #   ###      ",
            "       #####        ",
            "                    ",
            "                    ",
        ],
        [
            "🥺「うんちが落ちてたぷゆ！」",
            "🥺「うんちしたのだれなの！」",
            "🤥「ゆめちゃんそんなの知らないよぉ🤥",
            "     なさけじゃないのぉ」",
            "🥺「ぷ、ぷゆは違うぷゆ……」",
            "🤥「じゃあゆめちゃんのせいだっていうのぉ🤥💢",
            "    ふざけないでねぇ🤥💢",
        ],
    ],
    [
        [
            "                    ",
            "                    ",
            "                    ",
            "                    ",
            "      ########      ",
            "      #      #      ",
            "      # . g g#      ",
            "      #  g g #      ",
            "      # g g  #      ",
            "      #  g   #      ",
            "      # g   !#      ",
            "      ########      ",
            "                    ",
            "                    ",
            "                    ",
        ],
        ["😎（さて寝るか……）"],
    ],
];
